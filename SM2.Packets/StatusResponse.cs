using SM2.Core.BaseTypes;
using SM2.Core.Server;
using System;
using System.Collections.Generic;
using System.Text;
using AutoSerialize;
using System.Threading.Tasks;
using System.Linq;

namespace SM2.Packets
{
    public class StatusResponse : Packet
    {
        const string LOGO = "data:image/png;base64,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CQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAcrMlAADIzZYAACA3WwIAgNxsCQAAMvvrEv8DnKSTnM8T+2cAAAAASUVORK5CYII=";
        public override ConnectionState RequiredState { get; } = ConnectionState.Status;
        public override ConnectionSide WritingSide { get; } = ConnectionSide.Server;
        public override VarInt Id { get; } = 0x00;

        [AutoSerialize(0)]
        public string JSONResponse;

        public override async Task PreWrite()
        {
            JSONResponse =
"{" +
"\"version\": {" +
"\"name\":\"1.13.1\"," +
$"\"protocol\": {ServerWrapper.ProtocolVersion}" +
$"}}," +
$"\"players\": {{" +
$"\"max\": 100," +
$"\"online\": {_ctx.Server.Connections.Where(x => x.State == ConnectionState.Play).Count() - 1}," +
$"\"sample\":[{/*TODO: Add Sample data*/""}]" +
$"}}," +
$"\"description\": {{" +
$"\"text\": \"Powered by SM2\"" +
$"}}," +
$"\"favicon\": \"{LOGO}\"" +
$"}}";


            await base.PreWrite();
        }
    }
}
